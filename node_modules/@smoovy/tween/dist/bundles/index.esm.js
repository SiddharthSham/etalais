import{Ticker as t}from"@smoovy/ticker";const s={in:(t,s,e,i)=>-e*Math.cos(t/i*(Math.PI/2))+e+s,out:(t,s,e,i)=>e*Math.sin(t/i*(Math.PI/2))+s},e={in:(t,s,e,i)=>0===t?s:e*Math.pow(2,10*(t/i-1))+s,out:(t,s,e,i)=>t===i?s+e:e*(1-Math.pow(2,-10*t/i))+s},i={in:(t,s,e,i)=>-e*(Math.sqrt(1-(t/=i)*t)-1)+s,out:(t,s,e,i)=>e*Math.sqrt(1-(t=t/i-1)*t)+s},a={in:(t,s,e,i)=>e-a.out(i-t,0,e,i)+s,out:(t,s,e,i)=>(t/=i)<1/2.75?e*(7.5625*t*t)+s:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+s:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+s:e*(7.5625*(t-=2.625/2.75)*t+.984375)+s};var r=Object.freeze({__proto__:null,Linear:{none:(t,s,e,i)=>e*t/i+s},Quad:{in:(t,s,e,i)=>e*(t/=i)*t+s,out:(t,s,e,i)=>-e*(t/=i)*(t-2)+s},Cubic:{in:(t,s,e,i)=>e*(t/=i)*t*t+s,out:(t,s,e,i)=>e*((t=t/i-1)*t*t+1)+s},Quart:{in:(t,s,e,i)=>e*(t/=i)*t*t*t+s,out:(t,s,e,i)=>-e*((t=t/i-1)*t*t*t-1)+s},Quint:{in:(t,s,e,i)=>e*(t/=i)*t*t*t*t+s,out:(t,s,e,i)=>e*((t=t/i-1)*t*t*t*t+1)+s},Sine:s,Expo:e,Circ:i,Back:{in:(t,s,e,i,a=1.70158)=>e*(t/=i)*t*((a+1)*t-a)+s,out:(t,s,e,i,a=1.70158)=>e*((t=t/i-1)*t*((a+1)*t+a)+1)+s},Bounce:a});class h{constructor(t,s,e){this.target=t,this.values=s,this.options=e,this.registry=h.registry,this.ticker=h.ticker,this.changes={},this.firstTick=!1,this._paused=!1,this._complete=!1,this._passed=0,this.stableTarget=Object.assign({},t),this.createThread()}static fromTo(t,s,e={}){return new h(t,s,e)}get easing(){return this.options.easing||i.out}get duration(){return"number"==typeof this.options.duration?this.options.duration:100}get paused(){return this._paused}get complete(){return this._complete}get passed(){return this._passed}set passed(t){this._passed=Math.min(t,this.duration),this.handleTick(this.currentTarget)}get progress(){return this.passed/this.duration}set progress(t){this.passed=this.duration*t}runCallback(t,...s){this.options.on&&"function"==typeof this.options.on[t]&&this.options.on[t].apply(this,s)}createDelay(s){const e=t.now();return this.delay=this.ticker.add((t,i,a)=>{if(this._paused)return;const r=i-e;r>=s?(this.runCallback("delay",s),delete this.delay,a()):this.runCallback("delay",r)})}overwriteTarget(t){const s=this.registry.get(t);s instanceof h&&(s.stop(),this.registry.delete(t),this.runCallback("overwrite"))}createThread(){this.thread&&!this.thread.dead&&this.thread.kill(),this.changes=function(t,s){const e={};for(const i in t)if(t.hasOwnProperty(i)&&s.hasOwnProperty(i)){const a=s[i]-t[i];0!==a&&(e[i]=a)}return e}(this.target,this.values),this.currentTarget=!1===this.options.mutate?Object.assign({},this.target):this.target;const t=0!==Object.keys(this.changes).length;return!1!==this.options.overwrite&&this.overwriteTarget(this.target),this.registry.set(this.target,this),this.firstTick=!0,this._complete=!1,this._passed=0,!0===this.options.paused&&this.pause(),this.delay&&(this.delay.kill(),delete this.delay),"number"==typeof this.options.delay&&(this.runCallback("update",this.currentTarget,this.progress),this.createDelay(this.options.delay)),this.thread=this.ticker.add((s,e,i)=>{this._paused||this.delay||(t?this.passed+=s/h.ticker.intervalMs:i())})}handleTick(t){this.firstTick&&(this.runCallback("start"),this.firstTick=!1),this.passed>=0&&this.processChanges(t,t=>this.easing.call(this,this._passed,this.stableTarget[t],this.changes[t],this.duration)),this._passed>=0&&this._passed>=this.duration&&(this.thread&&!this.thread.dead&&this.thread.kill(),this.processChanges(t,t=>this.values[t]),this.runCallback("complete"),this._complete=!0)}processChanges(t,s){for(const e in this.changes)this.changes.hasOwnProperty(e)&&(t[e]=s(e));this.runCallback("update",t,this.progress)}stop(){return this.thread&&!this.thread.dead&&(this.thread.kill(),this.runCallback("stop")),this}start(){return this._paused&&(this._paused=!1,this.thread&&!this.thread.dead&&this.runCallback("start")),this}pause(){return this._paused||(this._paused=!0,this.thread&&!this.thread.dead&&this.runCallback("pause")),this}reset(){if(!1!==this.options.mutate)for(const t in this.stableTarget)this.stableTarget.hasOwnProperty(t)&&(this.target[t]=this.stableTarget[t]);return this.runCallback("reset"),this.createThread(),this}}h.ticker=new t,h.registry=new WeakMap;const n=Object.assign({},r),o={};for(const t in n)if(n.hasOwnProperty(t))for(const s in n[t])n[t].hasOwnProperty(s)&&(o[`${t}.${s}`]=n[t][s]);export{h as Tween,r as easings,o as easingsFlatMap,n as easingsMap};
//# sourceMappingURL=index.esm.js.map
