{"version":3,"file":"index.esm.js","sources":["../../src/easing.ts","../../src/tween.ts","../../src/index.ts"],"sourcesContent":["export type EasingImplementation =\n  ((t: number, b: number, c: number, d: number) => number) |\n  ((t: number, b: number, c: number, d: number, s?: number) => number);\n\n/* istanbul ignore next */\nexport const Linear = {\n  none: (t: number, b: number, c: number, d: number): number => {\n    return c * t / d + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quad = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return -c * (t /= d) * (t - 2) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Cubic = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quart = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Quint = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Sine = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Expo = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return (t === 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return (t === d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Circ = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Back = {\n  in: (\n    t: number,\n    b: number,\n    c: number,\n    d: number,\n    s: number = 1.70158\n  ): number => {\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  out: (\n    t: number,\n    b: number,\n    c: number,\n    d: number,\n    s: number = 1.70158\n  ): number => {\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  }\n};\n\n/* istanbul ignore next */\nexport const Bounce = {\n  in: (t: number, b: number, c: number, d: number): number => {\n    return c - Bounce.out(d - t, 0, c, d) + b;\n  },\n  out: (t: number, b: number, c: number, d: number): number => {\n    if ((t /= d) < (1 / 2.75)) {\n        return c * (7.5625 * t * t) + b;\n    } else if (t < (2 / 2.75)) {\n        return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;\n    } else if (t < (2.5 / 2.75)) {\n        return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;\n    } else {\n        return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;\n    }\n  }\n};\n","import { Ticker, TickerThread } from '@smoovy/ticker';\n\nimport * as easings from './easing';\nimport { EasingImplementation } from './easing';\n\nexport interface TweenTarget {\n  [key: string]: number | any;\n}\n\nexport interface TweenCallbacks<V> {\n  stop: () => void;\n  pause: () => void;\n  start: () => void;\n  reset: () => void;\n  delay: (passed: number) => void;\n  update: (values: V, progress: number) => void;\n  overwrite: () => void;\n  complete: () => void;\n}\n\nexport interface TweenOptions<V> {\n  easing: EasingImplementation;\n  delay: number;\n  duration: number;\n  mutate: boolean;\n  paused: boolean;\n  overwrite: boolean;\n  on: Partial<TweenCallbacks<V>>;\n}\n\nfunction getChanges<T extends TweenTarget>(\n  from: T,\n  to: Partial<T>\n) {\n  const changes = {} as typeof to;\n\n  for (const key in from) {\n    if (from.hasOwnProperty(key) && to.hasOwnProperty(key)) {\n      const change = (to[key] as number) - from[key];\n\n      if (change !== 0) {\n        changes[key] = change as any;\n      }\n    }\n  }\n\n  return changes;\n}\n\nexport class Tween<T extends TweenTarget = any> {\n  public static ticker = new Ticker();\n  private static registry = new WeakMap<TweenTarget, Tween>();\n  private registry = Tween.registry;\n  private ticker = Tween.ticker;\n  private thread?: TickerThread;\n  private delay?: TickerThread;\n  private changes: Partial<T> = {};\n  private stableTarget: T;\n  private currentTarget: T;\n  private firstTick = false;\n  private _paused = false;\n  private _complete = false;\n  private _passed = 0;\n\n  public constructor(\n    public target: T,\n    public values: Partial<T>,\n    protected options: Partial<TweenOptions<T>>\n  ) {\n    this.stableTarget = { ...target };\n\n    this.createThread();\n  }\n\n  public static fromTo<T extends TweenTarget>(\n    fromTarget: T,\n    toValues: Partial<T>,\n    options: Partial<TweenOptions<T>> = {}\n  ): Tween<T> {\n    return new Tween(fromTarget, toValues, options);\n  }\n\n  public get easing() {\n    return this.options.easing || easings.Circ.out;\n  }\n\n  public get duration() {\n    return typeof this.options.duration === 'number'\n      ? this.options.duration\n      : 100;\n  }\n\n  public get paused() {\n    return this._paused;\n  }\n\n  public get complete() {\n    return this._complete;\n  }\n\n  public get passed() {\n    return this._passed;\n  }\n\n  public set passed(ms: number) {\n    this._passed = Math.min(ms, this.duration);\n\n    this.handleTick(this.currentTarget);\n  }\n\n  public get progress() {\n    return this.passed / this.duration;\n  }\n\n  public set progress(percent: number) {\n    this.passed = this.duration * percent;\n  }\n\n  private  runCallback<V>(\n    name: keyof TweenCallbacks<V>,\n    ...args: any[]\n  ) {\n    if (this.options.on && typeof this.options.on[name] === 'function') {\n      (this.options.on[name] as any).apply(this, args);\n    }\n  }\n\n  private createDelay(ms: number) {\n    const start = Ticker.now();\n\n    return this.delay = this.ticker.add(\n      (_delta, time, kill) => {\n        if (this._paused) {\n          return;\n        }\n\n        const passed = time - start;\n\n        if (passed >= ms) {\n          this.runCallback('delay', ms);\n          delete this.delay;\n          kill();\n        } else {\n          this.runCallback('delay', passed);\n        }\n      }\n    );\n  }\n\n  private overwriteTarget(target: T) {\n    const tween = this.registry.get(target);\n\n    if (tween instanceof Tween) {\n      tween.stop();\n      this.registry.delete(target);\n      this.runCallback('overwrite');\n    }\n  }\n\n  private createThread()  {\n    if (this.thread && ! this.thread.dead) {\n      this.thread.kill();\n    }\n\n    this.changes = getChanges(this.target, this.values);\n    this.currentTarget = this.options.mutate === false\n    ? { ...this.target }\n    : this.target;\n\n    const changed = Object.keys(this.changes).length !== 0;\n\n    if (this.options.overwrite !== false) {\n      this.overwriteTarget(this.target);\n    }\n\n    this.registry.set(this.target, this);\n    this.firstTick = true;\n    this._complete = false;\n    this._passed = 0;\n\n    if (this.options.paused === true) {\n      this.pause();\n    }\n\n    if (this.delay) {\n      this.delay.kill();\n      delete this.delay;\n    }\n\n    if (typeof this.options.delay === 'number') {\n      this.runCallback('update', this.currentTarget, this.progress);\n      this.createDelay(this.options.delay);\n    }\n\n    return this.thread = this.ticker.add((delta, _time, kill) => {\n      if (this._paused || this.delay) {\n        return;\n      }\n\n      if ( ! changed) {\n        kill();\n        return;\n      }\n\n      this.passed += delta / Tween.ticker.intervalMs;\n    });\n  }\n\n  private handleTick(target: T) {\n    if (this.firstTick) {\n      this.runCallback('start');\n      this.firstTick = false;\n    }\n\n    /* istanbul ignore else */\n    if (this.passed >= 0) {\n      this.processChanges(target, (prop) => this.easing.call(\n        this,\n        this._passed,\n        this.stableTarget[prop],\n        this.changes[prop] as number,\n        this.duration\n      ));\n    }\n\n    /* istanbul ignore else */\n    if (this._passed >= 0 && this._passed >= this.duration) {\n      /* istanbul ignore else */\n      if (this.thread && ! this.thread.dead) {\n        this.thread.kill();\n      }\n\n      this.processChanges(target, (prop) => this.values[prop] as number);\n      this.runCallback('complete');\n\n      this._complete = true;\n    }\n  }\n\n  private processChanges(\n    targetTo: T,\n    value: (key: string) => number\n  ) {\n    for (const prop in this.changes) {\n      /* istanbul ignore else */\n      if (this.changes.hasOwnProperty(prop)) {\n        targetTo[prop] = value(prop) as any;\n      }\n    }\n\n    this.runCallback('update', targetTo, this.progress);\n  }\n\n  public stop() {\n    if (this.thread && ! this.thread.dead) {\n      this.thread.kill();\n\n      this.runCallback('stop');\n    }\n\n    return this;\n  }\n\n  public start() {\n    if (this._paused) {\n      this._paused = false;\n\n      /* istanbul ignore else */\n      if (this.thread && ! this.thread.dead) {\n        this.runCallback('start');\n      }\n    }\n\n    return this;\n  }\n\n  public pause() {\n    if ( ! this._paused) {\n      this._paused = true;\n\n      if (this.thread && ! this.thread.dead) {\n        this.runCallback('pause');\n      }\n    }\n\n    return this;\n  }\n\n  public reset() {\n    if (this.options.mutate !== false) {\n      for (const x in this.stableTarget) {\n        /* istanbul ignore else */\n        if (this.stableTarget.hasOwnProperty(x)) {\n          this.target[x] = this.stableTarget[x];\n        }\n      }\n    }\n\n    this.runCallback('reset');\n    this.createThread();\n\n    return this;\n  }\n}\n","import * as _easings from './easing';\n\nexport { EasingImplementation } from './easing';\nexport * from './tween';\nexport { _easings as easings };\nexport { easingsFlatMap };\n\n\nexport const easingsMap: {\n  [id: string]: { [type: string]: _easings.EasingImplementation }\n} = { ..._easings };\n\nconst easingsFlatMap: { [path: string]: _easings.EasingImplementation } = {};\n\nfor (const name in easingsMap) {\n  /* istanbul ignore else */\n  if (easingsMap.hasOwnProperty(name)) {\n    for (const type in easingsMap[name]) {\n      /* istanbul ignore else */\n      if (easingsMap[name].hasOwnProperty(type)) {\n        easingsFlatMap[`${name}.${type}`] = easingsMap[name][type];\n      }\n    }\n  }\n}\n\n\n"],"names":["Sine","in","t","b","c","d","Math","cos","PI","out","sin","Expo","pow","Circ","sqrt","Bounce","none","s","Tween","[object Object]","target","values","options","this","registry","ticker","stableTarget","createThread","fromTarget","toValues","easing","easings.Circ","duration","paused","_paused","complete","_complete","passed","_passed","ms","min","handleTick","currentTarget","progress","percent","name","args","on","apply","start","Ticker","now","delay","add","_delta","time","kill","runCallback","tween","get","stop","delete","thread","dead","changes","from","to","key","hasOwnProperty","change","getChanges","mutate","changed","Object","keys","length","overwrite","overwriteTarget","set","firstTick","pause","createDelay","delta","_time","intervalMs","processChanges","prop","call","targetTo","value","x","WeakMap","easingsMap","_easings","easingsFlatMap","type"],"mappings":"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"}